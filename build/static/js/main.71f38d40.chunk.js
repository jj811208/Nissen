(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(t,a,e){t.exports=e.p+"static/media/logo.5d5d9eef.svg"},,function(t,a,e){t.exports=e.p+"static/media/lemon.5ace125f.mid"},function(t,a,e){t.exports=e.p+"static/media/A0.55bad57e.wav"},function(t,a,e){t.exports=e.p+"static/media/A1.e6665d28.wav"},function(t,a,e){t.exports=e.p+"static/media/A2.ffae8348.wav"},function(t,a,e){t.exports=e.p+"static/media/A3.da6a8aa5.wav"},function(t,a,e){t.exports=e.p+"static/media/A4.d73cabf6.wav"},function(t,a,e){t.exports=e.p+"static/media/A5.37655296.wav"},function(t,a,e){t.exports=e.p+"static/media/A6.9e62a1d1.wav"},function(t,a,e){t.exports=e.p+"static/media/As0.43185359.wav"},function(t,a,e){t.exports=e.p+"static/media/As1.6d0a31ab.wav"},function(t,a,e){t.exports=e.p+"static/media/As2.775f7d0c.wav"},function(t,a,e){t.exports=e.p+"static/media/As3.4d882a00.wav"},function(t,a,e){t.exports=e.p+"static/media/As4.a598d864.wav"},function(t,a,e){t.exports=e.p+"static/media/As5.b36a3b4f.wav"},function(t,a,e){t.exports=e.p+"static/media/As6.a0e61679.wav"},function(t,a,e){t.exports=e.p+"static/media/B0.a1cb8b82.wav"},function(t,a,e){t.exports=e.p+"static/media/B1.a306b1aa.wav"},function(t,a,e){t.exports=e.p+"static/media/B2.d779f678.wav"},function(t,a,e){t.exports=e.p+"static/media/B3.8f63bb62.wav"},function(t,a,e){t.exports=e.p+"static/media/B4.2f51ebf5.wav"},function(t,a,e){t.exports=e.p+"static/media/B5.ad696f7f.wav"},function(t,a,e){t.exports=e.p+"static/media/B6.0159fbf4.wav"},function(t,a,e){t.exports=e.p+"static/media/C0.b7c2f2c1.wav"},function(t,a,e){t.exports=e.p+"static/media/C1.35518a7d.wav"},function(t,a,e){t.exports=e.p+"static/media/C2.dda39adc.wav"},function(t,a,e){t.exports=e.p+"static/media/C3.0be5311b.wav"},function(t,a,e){t.exports=e.p+"static/media/C4.1dfeaa09.wav"},function(t,a,e){t.exports=e.p+"static/media/C5.8f711432.wav"},function(t,a,e){t.exports=e.p+"static/media/C6.203f5eb7.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs0.a7648be8.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs1.99ecb003.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs2.1f7f4dd9.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs3.fc385203.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs4.bab03f8c.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs5.95ae7cd6.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs6.1412a54d.wav"},function(t,a,e){t.exports=e.p+"static/media/D0.95ecedd2.wav"},function(t,a,e){t.exports=e.p+"static/media/D1.4c24fb28.wav"},function(t,a,e){t.exports=e.p+"static/media/D2.5bea68b7.wav"},function(t,a,e){t.exports=e.p+"static/media/D3.6247322f.wav"},function(t,a,e){t.exports=e.p+"static/media/D4.bd35c19d.wav"},function(t,a,e){t.exports=e.p+"static/media/D5.8856b898.wav"},function(t,a,e){t.exports=e.p+"static/media/D6.e926b007.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds0.cd6a0599.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds1.2d001db1.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds2.bb27efb1.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds3.b3f1b57d.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds4.2716ade6.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds5.2958c5ca.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds6.0306d567.wav"},function(t,a,e){t.exports=e.p+"static/media/E0.31dfb23f.wav"},function(t,a,e){t.exports=e.p+"static/media/E1.bb5c2154.wav"},function(t,a,e){t.exports=e.p+"static/media/E2.ddc00192.wav"},function(t,a,e){t.exports=e.p+"static/media/E3.c700eea2.wav"},function(t,a,e){t.exports=e.p+"static/media/E4.2cc96930.wav"},function(t,a,e){t.exports=e.p+"static/media/E5.8e3475a3.wav"},function(t,a,e){t.exports=e.p+"static/media/E6.913120da.wav"},function(t,a,e){t.exports=e.p+"static/media/F0.51c1291b.wav"},function(t,a,e){t.exports=e.p+"static/media/F1.8de627a7.wav"},function(t,a,e){t.exports=e.p+"static/media/F2.d5718aae.wav"},function(t,a,e){t.exports=e.p+"static/media/F3.a8f31c25.wav"},function(t,a,e){t.exports=e.p+"static/media/F4.8a38f56e.wav"},function(t,a,e){t.exports=e.p+"static/media/F5.7948d726.wav"},function(t,a,e){t.exports=e.p+"static/media/F6.0715ffe3.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs0.3cc0f455.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs1.6752efe9.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs2.848d9637.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs3.02ef6da4.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs4.06299bfb.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs5.a97772fe.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs6.4e8fa579.wav"},function(t,a,e){t.exports=e.p+"static/media/G0.9afa156a.wav"},function(t,a,e){t.exports=e.p+"static/media/G1.777d423a.wav"},function(t,a,e){t.exports=e.p+"static/media/G2.cf52d708.wav"},function(t,a,e){t.exports=e.p+"static/media/G3.146a244a.wav"},function(t,a,e){t.exports=e.p+"static/media/G4.151cf8d0.wav"},function(t,a,e){t.exports=e.p+"static/media/G5.f6ec5736.wav"},function(t,a,e){t.exports=e.p+"static/media/G6.1251326d.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs0.451faa2d.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs1.500fb460.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs2.36ae9a32.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs3.c3d31c76.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs4.c9f62960.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs5.88550874.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs6.c867a170.wav"},,function(t,a,e){t.exports=e(122)},,,,,,function(t,a,e){},function(t,a,e){},,,,,,,,,,,,,,,,,,,,function(t,a,e){"use strict";e.r(a);var n=e(0),i=e.n(n),o=e(6),c=e.n(o),s=(e(101),e(1)),r=e(7),u=e.n(r),p=e(8),d=e.n(p),f=e(2),m=e.n(f),l=(e(102),e(9)),v=e.n(l),w=e(10),x=e.n(w),b=e(11),g=e.n(b),h=e(12),A=e.n(h),F=e(13),C=e.n(F),E=e(14),D=e.n(E),G=e(15),j=e.n(G),M=e(16),k=e.n(M),O=e(17),R=e.n(O),B=e(18),y=e.n(B),S=e(19),U=e.n(S),q=e(20),N=e.n(q),T=e(21),z=e.n(T),J=e(22),L=e.n(J),P=e(23),W=e.n(P),H=e(24),I=e.n(H),V=e(25),$=e.n(V),K=e(26),Q=e.n(K),X=e(27),Y=e.n(X),Z=e(28),_=e.n(Z),tt=e(29),at=e.n(tt),et=e(30),nt=e.n(et),it=e(31),ot=e.n(it),ct=e(32),st=e.n(ct),rt=e(33),ut=e.n(rt),pt=e(34),dt=e.n(pt),ft=e(35),mt=e.n(ft),lt=e(36),vt=e.n(lt),wt=e(37),xt=e.n(wt),bt=e(38),gt=e.n(bt),ht=e(39),At=e.n(ht),Ft=e(40),Ct=e.n(Ft),Et=e(41),Dt=e.n(Et),Gt=e(42),jt=e.n(Gt),Mt=e(43),kt=e.n(Mt),Ot=e(44),Rt=e.n(Ot),Bt=e(45),yt=e.n(Bt),St=e(46),Ut=e.n(St),qt=e(47),Nt=e.n(qt),Tt=e(48),zt=e.n(Tt),Jt=e(49),Lt=e.n(Jt),Pt=e(50),Wt=e.n(Pt),Ht=e(51),It=e.n(Ht),Vt=e(52),$t=e.n(Vt),Kt=e(53),Qt=e.n(Kt),Xt=e(54),Yt=e.n(Xt),Zt=e(55),_t=e.n(Zt),ta=e(56),aa=e.n(ta),ea=e(57),na=e.n(ea),ia=e(58),oa=e.n(ia),ca=e(59),sa=e.n(ca),ra=e(60),ua=e.n(ra),pa=e(61),da=e.n(pa),fa=e(62),ma=e.n(fa),la=e(63),va=e.n(la),wa=e(64),xa=e.n(wa),ba=e(65),ga=e.n(ba),ha=e(66),Aa=e.n(ha),Fa=e(67),Ca=e.n(Fa),Ea=e(68),Da=e.n(Ea),Ga=e(69),ja=e.n(Ga),Ma=e(70),ka=e.n(Ma),Oa=e(71),Ra=e.n(Oa),Ba=e(72),ya=e.n(Ba),Sa=e(73),Ua=e.n(Sa),qa=e(74),Na=e.n(qa),Ta=e(75),za=e.n(Ta),Ja=e(76),La=e.n(Ja),Pa=e(77),Wa=e.n(Pa),Ha=e(78),Ia=e.n(Ha),Va=e(79),$a=e.n(Va),Ka=e(80),Qa=e.n(Ka),Xa=e(81),Ya=e.n(Xa),Za=e(82),_a=e.n(Za),te=e(83),ae=e.n(te),ee=e(84),ne=e.n(ee),ie=e(85),oe=e.n(ie),ce=e(86),se=e.n(ce),re=e(87),ue=e.n(re),pe=e(88),de=e.n(pe),fe=e(89),me=e.n(fe),le=e(90),ve=e.n(le),we=e(91),xe=e.n(we),be=e(92),ge=e.n(be),he=e(93),Ae=e.n(he),Fe={A0:x.a,A1:g.a,A2:A.a,A3:C.a,A4:D.a,A5:j.a,A6:k.a,"A#0":R.a,"A#1":y.a,"A#2":U.a,"A#3":N.a,"A#4":z.a,"A#5":L.a,"A#6":W.a,B0:I.a,B1:$.a,B2:Q.a,B3:Y.a,B4:_.a,B5:at.a,B6:nt.a,C0:ot.a,C1:st.a,C2:ut.a,C3:dt.a,C4:mt.a,C5:vt.a,C6:xt.a,"C#0":gt.a,"C#1":At.a,"C#2":Ct.a,"C#3":Dt.a,"C#4":jt.a,"C#5":kt.a,"C#6":Rt.a,D0:yt.a,D1:Ut.a,D2:Nt.a,D3:zt.a,D4:Lt.a,D5:Wt.a,D6:It.a,"D#0":$t.a,"D#1":Qt.a,"D#2":Yt.a,"D#3":_t.a,"D#4":aa.a,"D#5":na.a,"D#6":oa.a,E0:sa.a,E1:ua.a,E2:da.a,E3:ma.a,E4:va.a,E5:xa.a,E6:ga.a,F0:Aa.a,F1:Ca.a,F2:Da.a,F3:ja.a,F4:ka.a,F5:Ra.a,F6:ya.a,"F#0":Ua.a,"F#1":Na.a,"F#2":za.a,"F#3":La.a,"F#4":Wa.a,"F#5":Ia.a,"F#6":$a.a,G0:Qa.a,G1:Ya.a,G2:_a.a,G3:ae.a,G4:ne.a,G5:oe.a,G6:se.a,"G#0":ue.a,"G#1":de.a,"G#2":me.a,"G#3":ve.a,"G#4":xe.a,"G#5":ge.a,"G#6":Ae.a},Ce=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.sampleRate||44100,e=t.minFrequency||82,n=t.maxFrequency||1e3,i=t.sensitivity||.1,o=t.ratio||5,c=[],s=Math.ceil(a/e),r=Math.floor(a/n);return function(t){var e,n,u,p,d,f,m,l,v=t.length,w=0,x=1/0,b=-1/0;for(p=0;p<v;p++)if(r<=p&&p<=s){for(m=0,l=p,w=0,e=[],n=[];m<v-p;w++,l++,m++)e[w]=t[m],n[w]=t[l];var g=e.length;for(u=[],f=0;f<g;f++)u[f]=e[f]-n[f];var h=0;for(f=0;f<g;f++)h+=Math.abs(u[f]);c[p]=h}for(d=r;d<s;d++)c[d]<x&&(x=c[d]),c[d]>b&&(b=c[d]);var A=Math.round(i*(b-x)+x);for(d=r;d<=s&&c[d]>A;d++);var F=r/2;x=c[d];var C=d;for(p=d-1;p<d+F&&p<=s;p++)c[p]<x&&(x=c[p],C=p);return Math.round(c[C]*o)<b?a/C:null}},Ee=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],De=["\u4f4e\u4f4e\u4f4e\u4f4e\u4f4e\u97f3","\u4f4e\u4f4e\u4f4e\u4f4e\u97f3","\u4f4e\u4f4e\u4f4e\u97f3","1","2","3","4","5","\u9ad8\u9ad8\u9ad8\u97f3","\u9ad8\u9ad8\u9ad8\u9ad8\u97f3","\u9ad8\u9ad8\u9ad8\u9ad8\u9ad8\u97f3"],Ge=function(t){var a=Math.log(t/440)/Math.log(2)*12;return Math.round(a)+69},je=function(t){return t>0&&t<1e4?Ee[t%12]+De[Math.floor(t/12)]:null},Me=e(94),ke=e.n(Me),Oe=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Re=window.cancelAnimationFrame||window.mozCancelAnimationFrame;window.AudioContext=window.AudioContext||window.webkitAudioContext;var Be=new m.a.Sampler(Fe,function(){console.log("ok")}).toMaster(),ye=function(t){var a=Object(n.useState)("-"),e=Object(s.a)(a,2),o=e[0],c=e[1],r=Object(n.useRef)(null),u=Object(n.useRef)("-"),p=Object(n.useState)(null),d=Object(s.a)(p,2)[1],f=Object(n.useState)("-"),l=Object(s.a)(f,2),v=l[0],w=l[1],x=Object(n.useState)(!1),b=Object(s.a)(x,2),g=b[0],h=b[1],A=Object(n.useRef)(!1),F=Object(n.useRef)({}),C=Object(n.useRef)([]),E=Object(n.useRef)(new AudioContext),D=Object(n.useRef)(null),G=Object(n.useRef)(null),j=Object(n.useRef)(new Float32Array(1024)),M=Object(n.useMemo)(Ce,[]),k=function(t){for(var a=[],e=0;e<t.length;e++){for(var n=0,i=e+1;i<t.length&&(t[e].pitch!==t[i].pitch&&n++,!(n>=6));i++);var o=i-n<=t.length-1?i-n:t.length-1,c=(t[o].time-t[e].time)/1e3;a.push({pitch:t[e].pitch,sec:c,count:o-e}),e=o}var s=[],r=0;a.forEach(function(t,a){t.count<6?a-++r>0&&(s[a-r].sec+=t.sec,s[a-r].count+=t.count):s.push({pitch:t.pitch,sec:t.sec,count:t.count})}),console.log(s);var u=0,p=m.a.now()+1;s.forEach(function(t,a){Be.triggerAttackRelease(t.pitch,t.sec,u+p),u+=t.sec})},O=function t(){D.current.getFloatTimeDomainData(j.current);var a=M(j.current),e=Ge(a)+12,n=je(e);e<36||e>95?(w("-"),c("-")):(w(e),c(n),A.current&&(C.current.push({pitch:n,time:(new Date).getTime()}),F.current[n]=F.current[n]?F.current[n]+1:1)),G.current=Oe(t),r.current.getPitch(function(t,a){if(t)console.error(t);else{var e=Ge(a)+12,n=je(e);u.current=null!==n?n:"-"}d()})},R=Object(n.useMemo)(function(){return{display:"inline-block",cursor:"pointer",border:"solid 2px #eee",borderRadius:"4px",padding:"4px 8px"}},[]),B=Object(n.useMemo)(function(){return{display:"inline-block",cursor:"pointer",border:"solid 2px #eee",borderRadius:"4px",padding:"4px 8px",marginTop:"8px"}},[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{onClick:function(){null!==G.current?g?(Re(G.current),h(!1)):(O(),h(!0)):function(t,a,e){try{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia(t,a,e)}catch(n){alert("getUserMedia threw exception :"+n)}}({audio:{mandatory:{googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googNoiseSuppression2:!0,googEchoCancellation2:!0,googAutoGainControl2:!0},optional:[]}},function(t){var a=E.current.createMediaStreamSource(t);r.current=ke.a.pitchDetection("https://cdn.jsdelivr.net/gh/ml5js/ml5-data-and-models/models/pitch-detection/crepe/",E.current,t,function(){console.log("okkk")}),D.current=E.current.createAnalyser(),a.connect(D.current),h(!0),O(),console.log(123)},function(){alert("getUserMedia\u5931\u6557")})},style:R},g?"\u95dc\u9589\u9ea5\u514b\u98a8":"\u958b\u555f\u9ea5\u514b\u98a8"),i.a.createElement("div",{onClick:function(){A.current?(k(C.current),F.current={},C.current=[],A.current=!1,w(",")):(A.current=!0,w("."))},style:B},A.current?"  \u6f14\u594f  ":"\u4eba\u8072\u8f49\u6a02\u5668\u9304\u88fd"),i.a.createElement("div",null,"isRecord:",g?"TRUE":"FALSE"),i.a.createElement("div",null,"isCatchVoice:",A.current?"TRUE":"FALSE"),i.a.createElement("div",null,"note:",v),i.a.createElement("div",null,"\u786c\u7528\u7b97\u5f0f\u7b97\u7684pitch:",o),i.a.createElement("div",null,"\u4eba\u5de5\u667a\u6167\u7b97\u7684pitch:",u.current))};var Se=function(){var t=i.a.useState(null),a=Object(s.a)(t,2),e=a[0],n=a[1];return i.a.useEffect(function(){d.a.fromUrl(v.a).then(function(t){n(t),console.log("okk")})},[]),i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),i.a.createElement(ye,null)),i.a.createElement("button",{onClick:function(){console.log(e);var t=m.a.now()+1.5;console.log(t),e.tracks.forEach(function(a){var e=null;new Promise(function(t){e=new m.a.Sampler(Fe,function(){t()}).toMaster()}).then(function(){a.notes.forEach(function(a){e.triggerAttackRelease(a.name,a.duration,a.time+t,a.velocity)})})})},type:"button"},"Start"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[95,1,2]]]);
//# sourceMappingURL=main.71f38d40.chunk.js.map