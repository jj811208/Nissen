(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(t,a,e){t.exports=e.p+"static/media/logo.5d5d9eef.svg"},,function(t,a,e){t.exports=e.p+"static/media/lemon.5ace125f.mid"},function(t,a,e){t.exports=e.p+"static/media/A0.55bad57e.wav"},function(t,a,e){t.exports=e.p+"static/media/A1.e6665d28.wav"},function(t,a,e){t.exports=e.p+"static/media/A2.ffae8348.wav"},function(t,a,e){t.exports=e.p+"static/media/A3.da6a8aa5.wav"},function(t,a,e){t.exports=e.p+"static/media/A4.d73cabf6.wav"},function(t,a,e){t.exports=e.p+"static/media/A5.37655296.wav"},function(t,a,e){t.exports=e.p+"static/media/A6.9e62a1d1.wav"},function(t,a,e){t.exports=e.p+"static/media/As0.43185359.wav"},function(t,a,e){t.exports=e.p+"static/media/As1.6d0a31ab.wav"},function(t,a,e){t.exports=e.p+"static/media/As2.775f7d0c.wav"},function(t,a,e){t.exports=e.p+"static/media/As3.4d882a00.wav"},function(t,a,e){t.exports=e.p+"static/media/As4.a598d864.wav"},function(t,a,e){t.exports=e.p+"static/media/As5.b36a3b4f.wav"},function(t,a,e){t.exports=e.p+"static/media/As6.a0e61679.wav"},function(t,a,e){t.exports=e.p+"static/media/B0.a1cb8b82.wav"},function(t,a,e){t.exports=e.p+"static/media/B1.a306b1aa.wav"},function(t,a,e){t.exports=e.p+"static/media/B2.d779f678.wav"},function(t,a,e){t.exports=e.p+"static/media/B3.8f63bb62.wav"},function(t,a,e){t.exports=e.p+"static/media/B4.2f51ebf5.wav"},function(t,a,e){t.exports=e.p+"static/media/B5.ad696f7f.wav"},function(t,a,e){t.exports=e.p+"static/media/B6.0159fbf4.wav"},function(t,a,e){t.exports=e.p+"static/media/C0.b7c2f2c1.wav"},function(t,a,e){t.exports=e.p+"static/media/C1.35518a7d.wav"},function(t,a,e){t.exports=e.p+"static/media/C2.dda39adc.wav"},function(t,a,e){t.exports=e.p+"static/media/C3.0be5311b.wav"},function(t,a,e){t.exports=e.p+"static/media/C4.1dfeaa09.wav"},function(t,a,e){t.exports=e.p+"static/media/C5.8f711432.wav"},function(t,a,e){t.exports=e.p+"static/media/C6.203f5eb7.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs0.a7648be8.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs1.99ecb003.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs2.1f7f4dd9.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs3.fc385203.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs4.bab03f8c.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs5.95ae7cd6.wav"},function(t,a,e){t.exports=e.p+"static/media/Cs6.1412a54d.wav"},function(t,a,e){t.exports=e.p+"static/media/D0.95ecedd2.wav"},function(t,a,e){t.exports=e.p+"static/media/D1.4c24fb28.wav"},function(t,a,e){t.exports=e.p+"static/media/D2.5bea68b7.wav"},function(t,a,e){t.exports=e.p+"static/media/D3.6247322f.wav"},function(t,a,e){t.exports=e.p+"static/media/D4.bd35c19d.wav"},function(t,a,e){t.exports=e.p+"static/media/D5.8856b898.wav"},function(t,a,e){t.exports=e.p+"static/media/D6.e926b007.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds0.cd6a0599.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds1.2d001db1.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds2.bb27efb1.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds3.b3f1b57d.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds4.2716ade6.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds5.2958c5ca.wav"},function(t,a,e){t.exports=e.p+"static/media/Ds6.0306d567.wav"},function(t,a,e){t.exports=e.p+"static/media/E0.31dfb23f.wav"},function(t,a,e){t.exports=e.p+"static/media/E1.bb5c2154.wav"},function(t,a,e){t.exports=e.p+"static/media/E2.ddc00192.wav"},function(t,a,e){t.exports=e.p+"static/media/E3.c700eea2.wav"},function(t,a,e){t.exports=e.p+"static/media/E4.2cc96930.wav"},function(t,a,e){t.exports=e.p+"static/media/E5.8e3475a3.wav"},function(t,a,e){t.exports=e.p+"static/media/E6.913120da.wav"},function(t,a,e){t.exports=e.p+"static/media/F0.51c1291b.wav"},function(t,a,e){t.exports=e.p+"static/media/F1.8de627a7.wav"},function(t,a,e){t.exports=e.p+"static/media/F2.d5718aae.wav"},function(t,a,e){t.exports=e.p+"static/media/F3.a8f31c25.wav"},function(t,a,e){t.exports=e.p+"static/media/F4.8a38f56e.wav"},function(t,a,e){t.exports=e.p+"static/media/F5.7948d726.wav"},function(t,a,e){t.exports=e.p+"static/media/F6.0715ffe3.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs0.3cc0f455.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs1.6752efe9.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs2.848d9637.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs3.02ef6da4.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs4.06299bfb.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs5.a97772fe.wav"},function(t,a,e){t.exports=e.p+"static/media/Fs6.4e8fa579.wav"},function(t,a,e){t.exports=e.p+"static/media/G0.9afa156a.wav"},function(t,a,e){t.exports=e.p+"static/media/G1.777d423a.wav"},function(t,a,e){t.exports=e.p+"static/media/G2.cf52d708.wav"},function(t,a,e){t.exports=e.p+"static/media/G3.146a244a.wav"},function(t,a,e){t.exports=e.p+"static/media/G4.151cf8d0.wav"},function(t,a,e){t.exports=e.p+"static/media/G5.f6ec5736.wav"},function(t,a,e){t.exports=e.p+"static/media/G6.1251326d.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs0.451faa2d.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs1.500fb460.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs2.36ae9a32.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs3.c3d31c76.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs4.c9f62960.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs5.88550874.wav"},function(t,a,e){t.exports=e.p+"static/media/Gs6.c867a170.wav"},function(t,a,e){t.exports=e(100)},,,,,,function(t,a,e){},function(t,a,e){},function(t,a,e){"use strict";e.r(a);var n=e(0),i=e.n(n),o=e(4),c=e.n(o),s=(e(98),e(2)),r=e(5),p=e.n(r),u=e(6),f=e.n(u),d=e(1),m=e.n(d),v=(e(99),e(7)),w=e.n(v),l=e(8),x=e.n(l),b=e(9),g=e.n(b),h=e(10),A=e.n(h),F=e(11),C=e.n(F),E=e(12),G=e.n(E),D=e(13),M=e.n(D),B=e(14),k=e.n(B),y=e(15),R=e.n(y),j=e(16),O=e.n(j),S=e(17),U=e.n(S),q=e(18),T=e.n(q),N=e(19),z=e.n(N),I=e(20),V=e.n(I),J=e(21),W=e.n(J),H=e(22),L=e.n(H),P=e(23),$=e.n(P),K=e(24),Q=e.n(K),X=e(25),Y=e.n(X),Z=e(26),_=e.n(Z),tt=e(27),at=e.n(tt),et=e(28),nt=e.n(et),it=e(29),ot=e.n(it),ct=e(30),st=e.n(ct),rt=e(31),pt=e.n(rt),ut=e(32),ft=e.n(ut),dt=e(33),mt=e.n(dt),vt=e(34),wt=e.n(vt),lt=e(35),xt=e.n(lt),bt=e(36),gt=e.n(bt),ht=e(37),At=e.n(ht),Ft=e(38),Ct=e.n(Ft),Et=e(39),Gt=e.n(Et),Dt=e(40),Mt=e.n(Dt),Bt=e(41),kt=e.n(Bt),yt=e(42),Rt=e.n(yt),jt=e(43),Ot=e.n(jt),St=e(44),Ut=e.n(St),qt=e(45),Tt=e.n(qt),Nt=e(46),zt=e.n(Nt),It=e(47),Vt=e.n(It),Jt=e(48),Wt=e.n(Jt),Ht=e(49),Lt=e.n(Ht),Pt=e(50),$t=e.n(Pt),Kt=e(51),Qt=e.n(Kt),Xt=e(52),Yt=e.n(Xt),Zt=e(53),_t=e.n(Zt),ta=e(54),aa=e.n(ta),ea=e(55),na=e.n(ea),ia=e(56),oa=e.n(ia),ca=e(57),sa=e.n(ca),ra=e(58),pa=e.n(ra),ua=e(59),fa=e.n(ua),da=e(60),ma=e.n(da),va=e(61),wa=e.n(va),la=e(62),xa=e.n(la),ba=e(63),ga=e.n(ba),ha=e(64),Aa=e.n(ha),Fa=e(65),Ca=e.n(Fa),Ea=e(66),Ga=e.n(Ea),Da=e(67),Ma=e.n(Da),Ba=e(68),ka=e.n(Ba),ya=e(69),Ra=e.n(ya),ja=e(70),Oa=e.n(ja),Sa=e(71),Ua=e.n(Sa),qa=e(72),Ta=e.n(qa),Na=e(73),za=e.n(Na),Ia=e(74),Va=e.n(Ia),Ja=e(75),Wa=e.n(Ja),Ha=e(76),La=e.n(Ha),Pa=e(77),$a=e.n(Pa),Ka=e(78),Qa=e.n(Ka),Xa=e(79),Ya=e.n(Xa),Za=e(80),_a=e.n(Za),te=e(81),ae=e.n(te),ee=e(82),ne=e.n(ee),ie=e(83),oe=e.n(ie),ce=e(84),se=e.n(ce),re=e(85),pe=e.n(re),ue=e(86),fe=e.n(ue),de=e(87),me=e.n(de),ve=e(88),we=e.n(ve),le=e(89),xe=e.n(le),be=e(90),ge=e.n(be),he=e(91),Ae=e.n(he),Fe={A0:x.a,A1:g.a,A2:A.a,A3:C.a,A4:G.a,A5:M.a,A6:k.a,"A#0":R.a,"A#1":O.a,"A#2":U.a,"A#3":T.a,"A#4":z.a,"A#5":V.a,"A#6":W.a,B0:L.a,B1:$.a,B2:Q.a,B3:Y.a,B4:_.a,B5:at.a,B6:nt.a,C0:ot.a,C1:st.a,C2:pt.a,C3:ft.a,C4:mt.a,C5:wt.a,C6:xt.a,"C#0":gt.a,"C#1":At.a,"C#2":Ct.a,"C#3":Gt.a,"C#4":Mt.a,"C#5":kt.a,"C#6":Rt.a,D0:Ot.a,D1:Ut.a,D2:Tt.a,D3:zt.a,D4:Vt.a,D5:Wt.a,D6:Lt.a,"D#0":$t.a,"D#1":Qt.a,"D#2":Yt.a,"D#3":_t.a,"D#4":aa.a,"D#5":na.a,"D#6":oa.a,E0:sa.a,E1:pa.a,E2:fa.a,E3:ma.a,E4:wa.a,E5:xa.a,E6:ga.a,F0:Aa.a,F1:Ca.a,F2:Ga.a,F3:Ma.a,F4:ka.a,F5:Ra.a,F6:Oa.a,"F#0":Ua.a,"F#1":Ta.a,"F#2":za.a,"F#3":Va.a,"F#4":Wa.a,"F#5":La.a,"F#6":$a.a,G0:Qa.a,G1:Ya.a,G2:_a.a,G3:ae.a,G4:ne.a,G5:oe.a,G6:se.a,"G#0":pe.a,"G#1":fe.a,"G#2":me.a,"G#3":we.a,"G#4":xe.a,"G#5":ge.a,"G#6":Ae.a},Ce=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.sampleRate||44100,e=t.minFrequency||82,n=t.maxFrequency||1e3,i=t.sensitivity||.1,o=t.ratio||5,c=[],s=Math.ceil(a/e),r=Math.floor(a/n);return function(t){var e,n,p,u,f,d,m,v,w=t.length,l=0,x=1/0,b=-1/0;for(u=0;u<w;u++)if(r<=u&&u<=s){for(m=0,v=u,l=0,e=[],n=[];m<w-u;l++,v++,m++)e[l]=t[m],n[l]=t[v];var g=e.length;for(p=[],d=0;d<g;d++)p[d]=e[d]-n[d];var h=0;for(d=0;d<g;d++)h+=Math.abs(p[d]);c[u]=h}for(f=r;f<s;f++)c[f]<x&&(x=c[f]),c[f]>b&&(b=c[f]);var A=Math.round(i*(b-x)+x);for(f=r;f<=s&&c[f]>A;f++);var F=r/2;x=c[f];var C=f;for(u=f-1;u<f+F&&u<=s;u++)c[u]<x&&(x=c[u],C=u);return Math.round(c[C]*o)<b?a/C:null}},Ee=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Ge=["\u4f4e\u4f4e\u4f4e\u4f4e\u4f4e\u97f3","\u4f4e\u4f4e\u4f4e\u4f4e\u97f3","\u4f4e\u4f4e\u4f4e\u97f3","1","2","3","4","5","\u9ad8\u9ad8\u9ad8\u97f3","\u9ad8\u9ad8\u9ad8\u9ad8\u97f3","\u9ad8\u9ad8\u9ad8\u9ad8\u9ad8\u97f3"],De={},Me=[],Be=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,ke=window.cancelAnimationFrame||window.mozCancelAnimationFrame,ye=new m.a.Sampler(Fe,function(){console.log("ok")}).toMaster(),Re=function(t){var a=Object(n.useState)("-"),e=Object(s.a)(a,2),o=e[0],c=e[1],r=Object(n.useState)("-"),p=Object(s.a)(r,2),u=p[0],f=p[1],d=Object(n.useRef)(!1),v=Object(n.useRef)(null),w=Object(n.useRef)(new AudioContext),l=Object(n.useRef)(w.current.createAnalyser()),x=Object(n.useRef)(new Float32Array(1024)),b=Object(n.useRef)(w.current.createBufferSource()),g=Object(n.useState)(null),h=Object(s.a)(g,2),A=(h[0],h[1],Object(n.useMemo)(Ce,[])),F=function t(){console.log(d.current,"\u70ba\u4ec0\u9ebc\u662ffalse"),l.current.getFloatTimeDomainData(x.current);var a,e=function(t){var a=Math.log(t/440)/Math.log(2)*12;return Math.round(a)+69}(A(x.current))+13,n=Ee[(a=e)%12]+Ge[Math.floor(a/12)];e<36||e>95?(f("-"),c("-")):(f(e),c(n),d.current&&(Me.push({pitch:n,time:(new Date).getTime()}),De[n]=De[n]?De[n]+1:1)),v.current=Be(t)},C=function(t){for(var a=[],e=0;e<t.length;e++){for(var n=0,i=e+1;i<t.length&&(t[e].pitch!==t[i].pitch&&n++,!(n>=6));i++);var o=i-n<=t.length-1?i-n:t.length-1,c=(t[o].time-t[e].time)/1e3;a.push({pitch:t[e].pitch,sec:c,count:o-e}),e=o}var s=[],r=0;a.forEach(function(t,a){t.count<6?a-++r>0&&(s[a-r].sec+=t.sec,s[a-r].count+=t.count):s.push({pitch:t.pitch,sec:t.sec,count:t.count})}),console.log(s);var p=0,u=m.a.now()+1;s.forEach(function(t,a){ye.triggerAttackRelease(t.pitch,t.sec,.5+(p+.001)+u),p+=t.sec+.001})};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{onClick:function(){l.current.connect(w.current.destination),b.current.start(0),b.current.stop(0),function(t,a,e){try{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia(t,a,e)}catch(n){alert("getUserMedia threw exception :"+n)}}({audio:{mandatory:{googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googNoiseSuppression2:!0,googEchoCancellation2:!0,googAutoGainControl2:!0},optional:[]}},function(t){w.current.createMediaStreamSource(t).connect(l.current),F()},function(){alert("getUserMedia\u5931\u6557")})},style:{display:"inline-block",cursor:"pointer",border:"solid 2px #eee",borderRadius:"4px",padding:"4px 8px"}},"\u958b\u555f\u9ea5\u514b\u98a8"),i.a.createElement("div",{onClick:function(){d.current?(C(Me),De={},Me=[],d.current=!1,console.log("setIsCatchVoice(false);"),setTimeout(function(){ke(v.current),v.current=Be(F)},200)):(d.current=!0,console.log("setIsCatchVoice(true);"),setTimeout(function(){ke(v.current),v.current=Be(F)},200))},style:{display:"inline-block",cursor:"pointer",border:"solid 2px #eee",borderRadius:"4px",padding:"4px 8px",marginTop:"8px"}},d.current?"  \u6f14\u594f  ":"\u4eba\u8072\u8f49\u6a02\u5668\u9304\u88fd"),i.a.createElement("div",null,"isCatchVoice:",d.current?"TRUE":"FALSE"),i.a.createElement("div",null,"note:",u),i.a.createElement("div",null,"pitch:",o))};var je=function(){var t=i.a.useState(null),a=Object(s.a)(t,2),e=a[0],n=a[1];return i.a.useEffect(function(){f.a.fromUrl(w.a).then(function(t){n(t),console.log("okk")})},[]),i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"}),i.a.createElement(Re,null)),i.a.createElement("button",{onClick:function(){console.log(e);var t=m.a.now()+1.5;console.log(t),e.tracks.forEach(function(a){var e=null;new Promise(function(t){e=new m.a.Sampler(Fe,function(){t()}).toMaster()}).then(function(){a.notes.forEach(function(a){e.triggerAttackRelease(a.name,a.duration,a.time+t,a.velocity)})})})},type:"button"},"Start"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[92,1,2]]]);
//# sourceMappingURL=main.69b44322.chunk.js.map